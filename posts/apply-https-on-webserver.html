<!DOCTYPE html><html lang="ko-KR"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta property="og:url" content="https://100paperkite.github.io"/><meta property="og:type" content="website"/><meta property="og:locale" content="ko-KR"/><meta property="og:site_name" content="paperkite.log ğŸ‘‹"/><title>ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2) | paperkite.log ğŸ‘‹</title><meta name="robots" content="index,follow"/><meta name="description" content="ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)"/><meta property="og:title" content="ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2) | paperkite.log ğŸ‘‹"/><meta property="og:description" content="ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","datePublished":"2023-03-03","description":"ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)","mainEntityOfPage":{"@type":"WebPage","@id":"https://100paperkite.github.io/posts/apply-https-on-webserver"},"headline":"ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)","dateModified":"2023-03-03","author":{"@type":"Person","name":"100paperkite"}}</script><meta name="next-head-count" content="12"/><script id="gtag-init" strategy="afterInteractive">
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-FFSLQ27YMJ', {
                page_path: window.location.pathname,
              });
            </script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FFSLQ27YMJ"></script><link rel="preload" href="/_next/static/css/a1fed7b6ed75c1ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a1fed7b6ed75c1ba.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-2b9c97c898ba3e9b.js" defer=""></script><script src="/_next/static/chunks/framework-a070cbfff3c750c5.js" defer=""></script><script src="/_next/static/chunks/main-1b1db7be3343898e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c1e739f18573092f.js" defer=""></script><script src="/_next/static/chunks/1bfc9850-6dd5619a8decfbcd.js" defer=""></script><script src="/_next/static/chunks/0c428ae2-aee1a03cbb0f41ac.js" defer=""></script><script src="/_next/static/chunks/17007de1-711cf284c97b49d4.js" defer=""></script><script src="/_next/static/chunks/5386-42957cb47b98ece3.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-e8ce3b8529fbe652.js" defer=""></script><script src="/_next/static/ynA6RsHmsr1Q1bci33Ez5/_buildManifest.js" defer=""></script><script src="/_next/static/ynA6RsHmsr1Q1bci33Ez5/_ssgManifest.js" defer=""></script><script src="/_next/static/ynA6RsHmsr1Q1bci33Ez5/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="flex flex-col min-h-screen"><nav class="flex justify-between sticky top-0 z-50 space-x-4 py-2 font-medium mx-2 md:mx-6 my-1 md:my-2 p-2"><a class="text-neutral-800 hover:text-neutral-600 text-lg md:text-xl" href="/">paperkite.log ğŸ‘‹</a><div class="flex gap-x-3"><a href="/tags"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" class="hover:cursor-pointer w-6 h-6 text-neutral-700" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg></a></div></nav><main class="max-w-screen-md px-4 w-full mx-auto flex-grow font-body"><div class="px-2 md:px-4 py-2 md:py-4"><div class="border-b border-1 mb-4 sm:mb-6 border-dashed border-neutral-300"><div class="flex items-center my-1 md:my-2 gap-x-2"><button class="text-neutral-500 font-bold">#http</button><button class="text-neutral-500 font-bold">#aws</button><button class="text-neutral-500 font-bold">#nginx</button><button class="text-neutral-500 font-bold">#security</button></div><h1 class="text-3xl sm:text-4xl font-bold mb-2 sm:mb-4 mt-6 sm:mt-10">ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)</h1><div class="flex py-2 md:py-3 pl-1 text-neutral-500"><small class="">March 3, 2023<!-- -->ì— ì‘ì„±</small></div></div><article class="max-w-none prose prose-neutral sm:prose-h1:text-[2.5rem] sm:prose-h2:text-[2rem] sm:prose-h3:text-2xl sm:prose-h4:text-xl"><h2>ê°€ì •</h2>
<div class="text-center pt-1 sm:pt-2 md:pt-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27700%27%20height=%27450%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="max-w-full h-auto" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/apply-https-on-webserver-0.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="max-w-full h-auto" loading="lazy"/></noscript></span><a class=" text-xs underline text-neutral-500"></a></div>
<ul>
<li>HTTPë¥¼ ì ìš©í•  ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ AWS EC2ì— ì˜¬ë ¤ì ¸ ìˆë‹¤.</li>
<li>Nginxë¥¼ ì‚¬ìš©í•´ HTTPS ì„¤ì •ì„ í•œë‹¤. (í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ Nginxê°€ ì„œë²„ ì•ë‹¨ì—ì„œ ìš”ì²­ì„ ëŒ€ì‹  ë°›ì•„ì„œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ë„˜ê²¨ì¤€ë‹¤. - ì´ë¥¼ <a href="https://ko.wikipedia.org/wiki/%EB%A6%AC%EB%B2%84%EC%8A%A4_%ED%94%84%EB%A1%9D%EC%8B%9C">ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ</a>ë¼ í•œë‹¤)</li>
</ul>
<h2>Nginx ì„¤ì •í•˜ê¸°</h2>
<h3>Nginx ì„¤ì¹˜</h3>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash"># ì„¤ì¹˜ 1 (redhat ê³„ì—´. ex. Amazon linux 2)
sudo yum clean metadata
sudo yum -y install nginx

# ë§Œì•½ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì˜¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì.
sudo amazon-linux-extras enable nginx1

# ì„¤ì¹˜ 2 (debian ê³„ì—´. ex. Ubuntu)
sudo apt-get install nginx</code></pre>
<h3>Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°</h3>
<p>ì„¤ì¹˜í•˜ê³  ë‚˜ë©´ <code>/etc/nginx</code> ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ëœë‹¤. nginxì˜ ë£¨íŠ¸ ì„¤ì • íŒŒì¼ì€ <code>/etc/nginx/nginx.conf</code> ì¸ë°, ë³´í†µ í•´ë‹¹ íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ì§„ ì•Šê³ , ì—¬ëŸ¬ í•˜ìœ„ ì„¤ì •íŒŒì¼ì„ ë‘ê³  ì´ íŒŒì¼ì—ì„œ ëª¨ë“ˆì²˜ëŸ¼ ë¡œë”©í•´ì„œ ì‚¬ìš©í•œë‹¤. (ì½”ë“œì—ì„œ ì¤‘ë³µ ì œê±°í•˜ëŠ” ê²ƒ ì²˜ëŸ¼) nginx.conf íŒŒì¼ì„ ë³´ë©´ ìˆëŠ” <code>include /etc/nginx/conf.d/*.conf</code> ì½”ë“œê°€ ì„¤ì •ì„ ë¡œë”©í•´ì˜¨ë‹¤.</p>
<p>https ì„¤ì •ì„ ìœ„í•´ì„œ <code>conf.d</code> í´ë” í•˜ìœ„ì— <code>default.conf</code> ê°™ì€ ìƒˆë¡œìš´ ì„¤ì •íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì.</p>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">server {
    listen 443 ssl;
    server_name &lt;ë„ë©”ì¸ ì´ë¦„&gt;

    location / {
        proxy_pass http://127.0.0.1:&lt;ì›¹ì„œë²„ê°€ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸&gt;;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
    }

    # ì•„ë˜ ë¶€ë¶„ì€ Let&#x27;s encryptë¥¼ í†µí•´ SSL ì¸ì¦ì„ ë°›ì€ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤.
    ssl_certificate /etc/letsencrypt/live/&lt;SSL ë°œê¸‰ë°›ì€ ë„ë©”ì¸ ì´ë¦„&gt;/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/&lt;SSL ë°œê¸‰ë°›ì€ ë„ë©”ì¸ ì´ë¦„&gt;/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}

# httpë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì€ httpsë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ë„ë¡ ì„¤ì •í•œë‹¤.
server {
    listen 80;
    location / {
        return 301 &lt;ë„ë©”ì¸ ì´ë¦„&gt;$request_uri;
    }
}</code></pre>
<h3>Nginx ì‹¤í–‰, ë¡œë”© ëª…ë ¹ì–´</h3>
<p>ì„¤ì •ì´ ì™„ë£Œë˜ë©´ nginxë¥¼ ì‹¤í–‰ì‹œì¼œì¤€ë‹¤.</p>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">sudo service nginx start # nginx ì„œë²„ ì‹¤í–‰í•˜ê¸°
sudo service nginx reload # ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í–ˆë‹¤ë©´ ì„¤ì •íŒŒì¼ì„ ë¡œë”©í•´ì˜¨ë‹¤.</code></pre>
<h2>SSL ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°</h2>
<p>nginxì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ë³´ì. ìš°ë¦¬ê°€ í”íˆ ì•„ëŠ” ì›¹ì‚¬ì´íŠ¸ë“¤ì€ CAë¼ëŠ” ë£¨íŠ¸ ì¸ì¦ê¸°ê´€ì—ì„œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì£¼ëŠ”ë°, ì§ì ‘ ë°œê¸‰í•˜ë ¤ë©´ <code>Let&#x27;s encrypt</code> ë¡œ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤(ë‚˜ë¥¼ ë‚´ê°€ ì¸ì¦í•˜ëŠ” ì‹).</p>
<h3>ë„ë©”ì¸ êµ¬ë§¤</h3>
<p>ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ë ¤ë©´ ë„ë©”ì¸ì´ ë¬´ì¡°ê±´ ìˆì–´ì•¼ í•œë‹¤. IPë§Œìœ¼ë¡œëŠ” ì„¤ì •í•  ìˆ˜ ì—†ë‹¤.</p>
<p>AWSì—ì„œ ì œê³µí•˜ëŠ” public domainì„ ì“°ë©´ ì•ˆë ê¹Œ? ì‹¶ì§€ë§Œ, AWS ë„ë©”ì¸ì€ ì‚¬ì‹¤ ì„ì‹œë¡œ ë¶€ì—¬í•˜ëŠ” ê²ƒë“¤ì´ë¼ ë³´ì•ˆ ìœ„í—˜ì´ í¬ê¸° ë•Œë¬¸ì— ì• ì´ˆì— LetsEncryptì—ì„œ ë§‰ì•„ë‘ì—ˆë‹¤.</p>
<div class="text-center pt-1 sm:pt-2 md:pt-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27700%27%20height=%27200%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="max-w-full h-auto" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/apply-https-on-webserver-1.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="max-w-full h-auto" loading="lazy"/></noscript></span><a class=" text-xs underline text-neutral-500"></a></div>
<p>ë„ë©”ì¸ì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ì—ì„œ ì €ë ´í•˜ê²Œ ë„ë©”ì¸ì„ êµ¬ë§¤í•˜ê±°ë‚˜, ë¬´ë£Œë¡œ ë„ë©”ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ì—ì„œ ë°œê¸‰í•˜ì.</p>
<h3>Certbot ì„¤ì¹˜</h3>
<p>Letâ€™s encryptì—ì„œ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì¸ Certbotì„ ì‚¬ìš©í•˜ë©´ SSL ì¸ì¦ì„œë¥¼ ì‰½ê²Œ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤.</p>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">sudo yum install certbot
sudo yum install python-certbot-nginx # nginxìš© í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜</code></pre>
<h3>Letâ€™s Encryptë¡œ SSL ë°œê¸‰í•˜ê¸°</h3>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">sudo certbot --nginx  -d &lt;ë„ë©”ì¸ ì´ë¦„&gt;</code></pre>
<p>ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ë‚˜ë©´ <code>/etc/letsencrypt/live/</code> í•˜ìœ„ì— ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ëœ í´ë”ê°€ í•˜ë‚˜ ìƒê¸°ê³ , SSL ì¸ì¦ì„ ìœ„í•œ íŒŒì¼ë“¤ì´ ë§Œë“¤ì–´ì§„ë‹¤.</p>
<p>ì´ íŒŒì¼ ê²½ë¡œë¥¼ nginxì˜ ì„¤ì •íŒŒì¼ì— ì…ë ¥í•´ì£¼ê³ , nginx ì„¤ì •ì„ ë¦¬ë¡œë“œí•´ì˜¤ë©´ ëª¨ë“  ì„¤ì •ì´ ëë‚œë‹¤.</p>
<h2>ì¸ì¦ì„œ ê°±ì‹  ìë™í™”í•˜ê¸°</h2>
<p>Letâ€™s EncryptëŠ” 90ì¼ ë§ˆë‹¤ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë°, ì§ì ‘ ì£¼ê¸°ë§ˆë‹¤ ê°±ì‹ ì„ í•´ì£¼ëŠ” ê²ƒì€ ë¶ˆí¸í•˜ë¯€ë¡œ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì´ìš©í•´ì„œ ìë™í™”í•´ë³´ì. linuxì—ëŠ” <code>crontab</code> ì´ë¼ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìˆìœ¼ë¯€ë¡œ <code>crontab</code> ì„ ì‚¬ìš©í•œë‹¤.</p>
<p>ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ í¸ì§‘ê¸°ë¥¼ ì‹¤í–‰í•˜ì.</p>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">crontab -e # ìŠ¤ì¼€ì¤„ëŸ¬ í¸ì§‘ê¸° ì‹¤í–‰</code></pre>
<p>ê·¸ë¦¬ê³  í¸ì§‘ê¸°ì— ë§¤ì›” 1ì¼ 0ì‹œ 0ë¶„ì— <code>certbot renew</code> ë¡œ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•˜ëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ ë“±ë¡ì´ ëë‚œë‹¤.</p>
<pre style="display:block;overflow-x:auto;background:#2d2d2d;color:#cccccc;padding:0.5em"><code class="language-bash">0 0 1 * * certbot renew --renew-hook &quot;sudo service nginx reload&quot;</code></pre></article><div><hr class="border-t border-neutral-300 my-8 sm:my-16"/><section></section></div></div></main><footer class="font-title py-4 sm:py-8 flex flex-col items-center text-neutral-600"><div class="flex flex-row my-2"><div class="flex items-center py-1"><a class="m-2 " href="https://github.com/100paperkite"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-7 h-7" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.976 0A7.977 7.977 0 0 0 0 7.976c0 3.522 2.3 6.507 5.431 7.584.392.049.538-.196.538-.392v-1.37c-2.201.49-2.69-1.076-2.69-1.076-.343-.93-.881-1.175-.881-1.175-.734-.489.048-.489.048-.489.783.049 1.224.832 1.224.832.734 1.223 1.859.88 2.3.685.048-.538.293-.88.489-1.076-1.762-.196-3.621-.881-3.621-3.964 0-.88.293-1.566.832-2.153-.05-.147-.343-.978.098-2.055 0 0 .685-.196 2.201.832.636-.196 1.322-.245 2.007-.245s1.37.098 2.006.245c1.517-1.027 2.202-.832 2.202-.832.44 1.077.146 1.908.097 2.104a3.16 3.16 0 0 1 .832 2.153c0 3.083-1.86 3.719-3.62 3.915.293.244.538.733.538 1.467v2.202c0 .196.146.44.538.392A7.984 7.984 0 0 0 16 7.976C15.951 3.572 12.38 0 7.976 0z"></path></svg></a><a class="m-2" href="mailto:100.paperkite@gmail.com"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="w-7 h-7" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5l.5-.5h13l.5.5v9l-.5.5h-13l-.5-.5v-9zm1 1.035V12h12V4.536L8.31 8.9H7.7L2 4.535zM13.03 4H2.97L8 7.869 13.03 4z"></path></svg></a></div></div><span class="text-sm text-neutral-500">100paperkite<!-- --> Â© <!-- -->2023</span></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"ì›¹ì„œë²„ì— HTTPS ì ìš©í•˜ê¸° (Letâ€™s Encrypt, Nginx, AWS EC2)","description":null,"uploaded":"2023-03-03","updated":null,"tags":["http","aws","nginx","security"],"draft":false},"slug":"apply-https-on-webserver","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      h2: \"h2\",\n      ul: \"ul\",\n      li: \"li\",\n      a: \"a\",\n      h3: \"h3\",\n      pre: \"pre\",\n      code: \"code\",\n      p: \"p\"\n    }, _provideComponents(), props.components), {Image} = _components;\n    if (!Image) _missingMdxReference(\"Image\", true);\n    return _jsxs(_Fragment, {\n      children: [_jsx(_components.h2, {\n        children: \"ê°€ì •\"\n      }), \"\\n\", _jsx(Image, {\n        src: \"/apply-https-on-webserver-0.png\",\n        height: \"450px\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"HTTPë¥¼ ì ìš©í•  ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ AWS EC2ì— ì˜¬ë ¤ì ¸ ìˆë‹¤.\"\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [\"Nginxë¥¼ ì‚¬ìš©í•´ HTTPS ì„¤ì •ì„ í•œë‹¤. (í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ Nginxê°€ ì„œë²„ ì•ë‹¨ì—ì„œ ìš”ì²­ì„ ëŒ€ì‹  ë°›ì•„ì„œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ë„˜ê²¨ì¤€ë‹¤. - ì´ë¥¼ \", _jsx(_components.a, {\n            href: \"https://ko.wikipedia.org/wiki/%EB%A6%AC%EB%B2%84%EC%8A%A4_%ED%94%84%EB%A1%9D%EC%8B%9C\",\n            children: \"ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ\"\n          }), \"ë¼ í•œë‹¤)\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"Nginx ì„¤ì •í•˜ê¸°\"\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"Nginx ì„¤ì¹˜\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"# ì„¤ì¹˜ 1 (redhat ê³„ì—´. ex. Amazon linux 2)\\nsudo yum clean metadata\\nsudo yum -y install nginx\\n\\n# ë§Œì•½ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ê³  ë‚˜ì˜¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì.\\nsudo amazon-linux-extras enable nginx1\\n\\n# ì„¤ì¹˜ 2 (debian ê³„ì—´. ex. Ubuntu)\\nsudo apt-get install nginx\\n\"\n        })\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"Nginx ì„¤ì • íŒŒì¼ ìˆ˜ì •í•˜ê¸°\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"ì„¤ì¹˜í•˜ê³  ë‚˜ë©´ \", _jsx(_components.code, {\n          children: \"/etc/nginx\"\n        }), \" ë””ë ‰í„°ë¦¬ê°€ ìƒì„±ëœë‹¤. nginxì˜ ë£¨íŠ¸ ì„¤ì • íŒŒì¼ì€ \", _jsx(_components.code, {\n          children: \"/etc/nginx/nginx.conf\"\n        }), \" ì¸ë°, ë³´í†µ í•´ë‹¹ íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•˜ì§„ ì•Šê³ , ì—¬ëŸ¬ í•˜ìœ„ ì„¤ì •íŒŒì¼ì„ ë‘ê³  ì´ íŒŒì¼ì—ì„œ ëª¨ë“ˆì²˜ëŸ¼ ë¡œë”©í•´ì„œ ì‚¬ìš©í•œë‹¤. (ì½”ë“œì—ì„œ ì¤‘ë³µ ì œê±°í•˜ëŠ” ê²ƒ ì²˜ëŸ¼) nginx.conf íŒŒì¼ì„ ë³´ë©´ ìˆëŠ” \", _jsx(_components.code, {\n          children: \"include /etc/nginx/conf.d/*.conf\"\n        }), \" ì½”ë“œê°€ ì„¤ì •ì„ ë¡œë”©í•´ì˜¨ë‹¤.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"https ì„¤ì •ì„ ìœ„í•´ì„œ \", _jsx(_components.code, {\n          children: \"conf.d\"\n        }), \" í´ë” í•˜ìœ„ì— \", _jsx(_components.code, {\n          children: \"default.conf\"\n        }), \" ê°™ì€ ìƒˆë¡œìš´ ì„¤ì •íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì.\"]\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"server {\\n    listen 443 ssl;\\n    server_name \u003cë„ë©”ì¸ ì´ë¦„\u003e\\n\\n    location / {\\n        proxy_pass http://127.0.0.1:\u003cì›¹ì„œë²„ê°€ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸\u003e;\\n        proxy_set_header X-Real-IP $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n        proxy_set_header Host $http_host;\\n    }\\n\\n    # ì•„ë˜ ë¶€ë¶„ì€ Let's encryptë¥¼ í†µí•´ SSL ì¸ì¦ì„ ë°›ì€ í‚¤ë¥¼ ì‚¬ìš©í•œë‹¤.\\n    ssl_certificate /etc/letsencrypt/live/\u003cSSL ë°œê¸‰ë°›ì€ ë„ë©”ì¸ ì´ë¦„\u003e/fullchain.pem;\\n    ssl_certificate_key /etc/letsencrypt/live/\u003cSSL ë°œê¸‰ë°›ì€ ë„ë©”ì¸ ì´ë¦„\u003e/privkey.pem;\\n    include /etc/letsencrypt/options-ssl-nginx.conf;\\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;\\n}\\n\\n# httpë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì€ httpsë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\\nserver {\\n    listen 80;\\n    location / {\\n        return 301 \u003cë„ë©”ì¸ ì´ë¦„\u003e$request_uri;\\n    }\\n}\\n\"\n        })\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"Nginx ì‹¤í–‰, ë¡œë”© ëª…ë ¹ì–´\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì„¤ì •ì´ ì™„ë£Œë˜ë©´ nginxë¥¼ ì‹¤í–‰ì‹œì¼œì¤€ë‹¤.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"sudo service nginx start # nginx ì„œë²„ ì‹¤í–‰í•˜ê¸°\\nsudo service nginx reload # ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í–ˆë‹¤ë©´ ì„¤ì •íŒŒì¼ì„ ë¡œë”©í•´ì˜¨ë‹¤.\\n\"\n        })\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"SSL ì¸ì¦ì„œ ë°œê¸‰í•˜ê¸°\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"nginxì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ë³´ì. ìš°ë¦¬ê°€ í”íˆ ì•„ëŠ” ì›¹ì‚¬ì´íŠ¸ë“¤ì€ CAë¼ëŠ” ë£¨íŠ¸ ì¸ì¦ê¸°ê´€ì—ì„œ ì¸ì¦ì„œë¥¼ ë°œê¸‰í•´ì£¼ëŠ”ë°, ì§ì ‘ ë°œê¸‰í•˜ë ¤ë©´ \", _jsx(_components.code, {\n          children: \"Let's encrypt\"\n        }), \" ë¡œ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤(ë‚˜ë¥¼ ë‚´ê°€ ì¸ì¦í•˜ëŠ” ì‹).\"]\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"ë„ë©”ì¸ êµ¬ë§¤\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì¸ì¦ì„œë¥¼ ë°œê¸‰í•˜ë ¤ë©´ ë„ë©”ì¸ì´ ë¬´ì¡°ê±´ ìˆì–´ì•¼ í•œë‹¤. IPë§Œìœ¼ë¡œëŠ” ì„¤ì •í•  ìˆ˜ ì—†ë‹¤.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"AWSì—ì„œ ì œê³µí•˜ëŠ” public domainì„ ì“°ë©´ ì•ˆë ê¹Œ? ì‹¶ì§€ë§Œ, AWS ë„ë©”ì¸ì€ ì‚¬ì‹¤ ì„ì‹œë¡œ ë¶€ì—¬í•˜ëŠ” ê²ƒë“¤ì´ë¼ ë³´ì•ˆ ìœ„í—˜ì´ í¬ê¸° ë•Œë¬¸ì— ì• ì´ˆì— LetsEncryptì—ì„œ ë§‰ì•„ë‘ì—ˆë‹¤.\"\n      }), \"\\n\", _jsx(Image, {\n        src: \"/apply-https-on-webserver-1.png\",\n        height: \"200px\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë„ë©”ì¸ì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ì—ì„œ ì €ë ´í•˜ê²Œ ë„ë©”ì¸ì„ êµ¬ë§¤í•˜ê±°ë‚˜, ë¬´ë£Œë¡œ ë„ë©”ì¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ì—ì„œ ë°œê¸‰í•˜ì.\"\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"Certbot ì„¤ì¹˜\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Letâ€™s encryptì—ì„œ ì¶”ì²œí•˜ëŠ” ë°©ì‹ì¸ Certbotì„ ì‚¬ìš©í•˜ë©´ SSL ì¸ì¦ì„œë¥¼ ì‰½ê²Œ ë°œê¸‰í•  ìˆ˜ ìˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"sudo yum install certbot\\nsudo yum install python-certbot-nginx # nginxìš© í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜\\n\"\n        })\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"Letâ€™s Encryptë¡œ SSL ë°œê¸‰í•˜ê¸°\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"sudo certbot --nginx  -d \u003cë„ë©”ì¸ ì´ë¦„\u003e\\n\"\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ë‚˜ë©´ \", _jsx(_components.code, {\n          children: \"/etc/letsencrypt/live/\"\n        }), \" í•˜ìœ„ì— ë„ë©”ì¸ ì´ë¦„ìœ¼ë¡œ ëœ í´ë”ê°€ í•˜ë‚˜ ìƒê¸°ê³ , SSL ì¸ì¦ì„ ìœ„í•œ íŒŒì¼ë“¤ì´ ë§Œë“¤ì–´ì§„ë‹¤.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì´ íŒŒì¼ ê²½ë¡œë¥¼ nginxì˜ ì„¤ì •íŒŒì¼ì— ì…ë ¥í•´ì£¼ê³ , nginx ì„¤ì •ì„ ë¦¬ë¡œë“œí•´ì˜¤ë©´ ëª¨ë“  ì„¤ì •ì´ ëë‚œë‹¤.\"\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"ì¸ì¦ì„œ ê°±ì‹  ìë™í™”í•˜ê¸°\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Letâ€™s EncryptëŠ” 90ì¼ ë§ˆë‹¤ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë°, ì§ì ‘ ì£¼ê¸°ë§ˆë‹¤ ê°±ì‹ ì„ í•´ì£¼ëŠ” ê²ƒì€ ë¶ˆí¸í•˜ë¯€ë¡œ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì´ìš©í•´ì„œ ìë™í™”í•´ë³´ì. linuxì—ëŠ” \", _jsx(_components.code, {\n          children: \"crontab\"\n        }), \" ì´ë¼ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìˆìœ¼ë¯€ë¡œ \", _jsx(_components.code, {\n          children: \"crontab\"\n        }), \" ì„ ì‚¬ìš©í•œë‹¤.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ì„œ í¸ì§‘ê¸°ë¥¼ ì‹¤í–‰í•˜ì.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"crontab -e # ìŠ¤ì¼€ì¤„ëŸ¬ í¸ì§‘ê¸° ì‹¤í–‰\\n\"\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"ê·¸ë¦¬ê³  í¸ì§‘ê¸°ì— ë§¤ì›” 1ì¼ 0ì‹œ 0ë¶„ì— \", _jsx(_components.code, {\n          children: \"certbot renew\"\n        }), \" ë¡œ ì¸ì¦ì„œë¥¼ ê°±ì‹ í•˜ëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥í•˜ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ ë“±ë¡ì´ ëë‚œë‹¤.\"]\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-bash\",\n          children: \"0 0 1 * * certbot renew --renew-hook \\\"sudo service nginx reload\\\"\\n\"\n        })\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"apply-https-on-webserver"},"buildId":"ynA6RsHmsr1Q1bci33Ez5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>